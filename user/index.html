<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>VeloDrive - Car Rental</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                    screens: {
                        'xs': '280px',
                        'sm': '640px',
                        'md': '768px',
                        'lg': '1024px',
                        'xl': '1280px',
                        '2xl': '1536px',
                        '3xl': '1920px',
                        '4xl': '2560px',
                    },
                colors: {
                    "primary": "#137fec",
                    "background-light": "#f6f7f8",
                    "background-dark": "#101922",
                },
                fontFamily: {
                    "display": ["Inter"]
                },
                borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
            },
        },
    }
</script>
<style>
    .glass-effect { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
    body { font-family: 'Inter', sans-serif; min-height: max(884px, 100dvh); }
    .material-symbols-outlined {
            font-family: 'Material Symbols Outlined'; font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }

        /* Enhanced responsive design for all devices */
        @media (min-width: 280px) {
            :root {
                font-size: clamp(12px, 3vw, 16px);
            }
        }
        @media (min-width: 640px) {
            :root {
                font-size: clamp(14px, 2vw, 16px);
            }
        }
        @media (min-width: 1024px) {
            :root {
                font-size: clamp(15px, 1.2vw, 18px);
            }
        }
        @media (min-width: 1920px) {
            :root {
                font-size: clamp(16px, 1vw, 20px);
            }
        }
        @media (min-width: 2560px) {
            :root {
                font-size: clamp(18px, 0.8vw, 24px);
            }
        }
        
        .container-responsive {
            max-width: clamp(280px, 100%, 1920px);
            margin: 0 auto;
            padding: clamp(0.5rem, 2vw, 2rem);
        }
        
        .text-responsive {
            font-size: clamp(0.875rem, 2vw, 1rem);
        }
        
        .heading-responsive {
            font-size: clamp(1.25rem, 3vw, 2rem);
        }

    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white min-h-screen pb-24">
<!-- Top Navigation Bar -->
<header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
<div class="flex items-center p-4 justify-between max-w-7xl mx-auto">
<div class="flex size-10 shrink-0 items-center justify-center" onclick="openDrawer()">
<span class="material-symbols-outlined cursor-pointer">menu</span>
</div>
<h2 class="text-lg font-bold leading-tight tracking-tight flex-1 text-center">VeloDrive</h2>
<div class="flex w-10 items-center justify-end">
<a href="profile.php" class="flex size-10 cursor-pointer items-center justify-center overflow-hidden rounded-full bg-primary/10 text-primary">
<span class="material-symbols-outlined">account_circle</span>
</a>
</div>
</div>
</header>
<main class="max-w-7xl mx-auto">
<!-- Welcome Section -->
<div class="px-4 py-6">
<h1 class="text-2xl font-bold tracking-tight">Welcome Back!</h1>
<p class="text-slate-500 dark:text-slate-400 mt-1">Find your perfect ride today</p>
</div>
<!-- Quick Actions -->
<div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 px-4">
<a href="browse_cars.php" class="flex flex-col items-center justify-center p-6 bg-white dark:bg-[#192633] rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm active:scale-95 transition-transform">
<div class="size-12 rounded-full bg-primary flex items-center justify-center mb-3">
<span class="material-symbols-outlined text-white">directions_car</span>
</div>
<span class="text-sm font-bold">Browse Cars</span>
</a>
<a href="my_bookings.php" class="flex flex-col items-center justify-center p-6 bg-white dark:bg-[#192633] rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm active:scale-95 transition-transform">
<div class="size-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3">
<span class="material-symbols-outlined text-primary">confirmation_number</span>
</div>
<span class="text-sm font-bold">My Bookings</span>
</a>
</div>
<!-- Featured Cars -->
<div class="px-4 pt-6 pb-2">
<h2 class="text-xl font-bold tracking-tight">Featured Cars</h2>
</div>
<div id="featuredCars" class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 p-4">
    <!-- Loading skeleton -->
    <div class="animate-pulse flex flex-col bg-white dark:bg-[#192633] rounded-xl overflow-hidden shadow-sm border border-slate-100 dark:border-slate-800/50">
        <div class="w-full aspect-[4/3] bg-slate-200 dark:bg-slate-800"></div>
        <div class="p-3 space-y-2">
            <div class="h-4 bg-slate-200 dark:bg-slate-800 rounded w-3/4"></div>
            <div class="h-4 bg-slate-200 dark:bg-slate-800 rounded w-1/4"></div>
        </div>
    </div>
</div>
</main>
<!-- Bottom Navigation Bar -->
<nav class="fixed bottom-0 left-0 right-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-xl border-t border-slate-200 dark:border-slate-800 pb-safe">
<div class="flex justify-around items-center h-20 max-w-7xl mx-auto px-6">
<a href="index.html" class="flex flex-col items-center justify-center text-primary">
<span class="material-symbols-outlined fill-1">home</span>
<span class="text-[10px] mt-1 font-bold">Home</span>
</a>
<a href="browse_cars.php" class="flex flex-col items-center justify-center text-slate-400 dark:text-slate-500">
<span class="material-symbols-outlined">explore</span>
<span class="text-[10px] mt-1 font-medium">Browse</span>
</a>
<a href="my_bookings.php" class="flex flex-col items-center justify-center text-slate-400 dark:text-slate-500">
<span class="material-symbols-outlined">calendar_today</span>
<span class="text-[10px] mt-1 font-medium">Bookings</span>
</a>
<a href="profile.php" class="flex flex-col items-center justify-center text-slate-400 dark:text-slate-500">
<span class="material-symbols-outlined">person</span>
<span class="text-[10px] mt-1 font-medium">Profile</span>
</a>
</div>
</nav>

<!-- Navigation Drawer -->
<div id="drawer-overlay" class="fixed inset-0 bg-black/50 z-[60] hidden transition-opacity duration-300 opacity-0"></div>
<div id="navigation-drawer" class="fixed top-0 left-0 bottom-0 w-[280px] bg-background-light dark:bg-background-dark z-[70] transform -translate-x-full transition-transform duration-300 ease-in-out border-r border-slate-200 dark:border-slate-800">
    <div class="flex flex-col h-full">
        <div class="p-6 border-b border-slate-200 dark:border-slate-800">
            <h2 class="text-2xl font-bold text-primary">VeloDrive</h2>
            <p class="text-xs text-slate-500 mt-1">Car Rental Services</p>
        </div>
        <div class="flex-1 overflow-y-auto py-4">
            <nav class="space-y-1 px-3">
                <a href="index.html" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-500">home</span>
                    <span class="font-semibold">Home</span>
                </a>
                <a href="browse_cars.php" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-500">explore</span>
                    <span class="font-semibold">Browse Cars</span>
                </a>
                <a href="my_bookings.php" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-500">calendar_today</span>
                    <span class="font-semibold">My Bookings</span>
                </a>
                <a href="favorites.php" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-500">favorite</span>
                    <span class="font-semibold">Favorites</span>
                </a>
                <hr class="my-4 border-slate-200 dark:border-slate-800 mx-4">
                <a href="profile.php" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-500">person</span>
                    <span class="font-semibold">My Profile</span>
                </a>
            </nav>
        </div>
        <div class="p-6 border-t border-slate-200 dark:border-slate-800">
            <a href="logout.php" class="flex items-center gap-3 px-4 py-3 rounded-xl text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-950/30 transition-colors">
                <span class="material-symbols-outlined">logout</span>
                <span class="font-semibold">Logout</span>
            </a>
        </div>
    </div>
</div>

<script>
function openDrawer() {
    const overlay = document.getElementById('drawer-overlay');
    const drawer = document.getElementById('navigation-drawer');
    overlay.classList.remove('hidden');
    setTimeout(() => {
        overlay.classList.add('opacity-100');
        drawer.classList.remove('-translate-x-full');
    }, 10);
}

function closeDrawer() {
    const overlay = document.getElementById('drawer-overlay');
    const drawer = document.getElementById('navigation-drawer');
    overlay.classList.remove('opacity-100');
    drawer.classList.add('-translate-x-full');
    setTimeout(() => {
        overlay.classList.add('hidden');
    }, 300);
}

document.getElementById('drawer-overlay').addEventListener('click', closeDrawer);

async function loadFeaturedCars() {
    const container = document.getElementById('featuredCars');
    try {
        const response = await fetch('../api/vehicles.php?featured=1&limit=6');
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();

        if (data.success && data.data) {
            if (data.data.length === 0) {
                container.innerHTML = '<p class="col-span-full text-center text-slate-500 py-8">No featured cars at the moment.</p>';
                return;
            }

            container.innerHTML = data.data.map(vehicle => `
                <div class="flex flex-col bg-white dark:bg-[#192633] rounded-xl overflow-hidden shadow-sm border border-slate-100 dark:border-slate-800/50 hover:shadow-md transition-shadow">
                    <a href="vehicle_details.php?id=${vehicle.id}" class="relative w-full aspect-[4/3] bg-slate-200 dark:bg-slate-800 bg-center bg-no-repeat bg-cover block" style='background-image: url("${vehicle.display_image}");'></a>
                    <div class="p-3">
                        <a href="vehicle_details.php?id=${vehicle.id}" class="text-slate-900 dark:text-white text-base font-bold leading-tight mb-1 block hover:text-primary transition-colors">${vehicle.make} ${vehicle.model}</a>
                        <p class="text-primary text-sm font-bold mb-2">₱${parseFloat(vehicle.daily_rate).toFixed(2)}<span class="text-slate-500 dark:text-slate-400 font-normal">/day</span></p>
                        <a href="checkout_summary.html?vehicle=${vehicle.id}" class="text-xs font-semibold text-primary">Book Now →</a>
                    </div>
                </div>
            `).join('');
        } else {
            throw new Error(data.error || 'Failed to load featured cars');
        }
    } catch (error) {
        console.error('Error loading featured cars:', error);
        container.innerHTML = '<p class="col-span-full text-center text-red-500 py-8">Unable to load featured cars at this time.</p>';
    }
}

document.addEventListener('DOMContentLoaded', loadFeaturedCars);
</script>
</body>
</html>
